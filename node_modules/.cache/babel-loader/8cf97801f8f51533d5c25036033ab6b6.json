{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\DELL\\\\fun-chat\\\\src\\\\components\\\\ChatRoom\\\\ChatWindow.js\",\n    _s = $RefreshSig$();\n\nimport { UserAddOutlined } from '@ant-design/icons';\nimport React, { useContext, useEffect, useRef, useState } from 'react';\nimport styled from 'styled-components';\nimport { Button, Tooltip, Avatar, Form, Input, Alert } from 'antd';\nimport Message from './Message';\nimport { AppContext } from '../../Context/AppProvider';\nimport { addDocument } from '../../firebase/services';\nimport { AuthContext } from '../../Context/AuthProvider';\nimport useFirestore from '../../hooks/useFirestore';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst HeaderStyled = styled.div`\n  display: flex;\n  justify-content: space-between;\n  height: 56px;\n  padding: 0 16px;\n  align-items: center;\n  border-bottom: 1px solid rgb(230, 230, 230);\n\n  .header {\n    &__info {\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n    }\n\n    &__title {\n      margin: 0;\n      font-weight: bold;\n    }\n\n    &__description {\n      font-size: 12px;\n    }\n  }\n`;\n_c = HeaderStyled;\nconst ButtonGroupStyled = styled.div`\n  display: flex;\n  align-items: center;\n`;\n_c2 = ButtonGroupStyled;\nconst WrapperStyled = styled.div`\n  height: 100vh;\n`;\n_c3 = WrapperStyled;\nconst ContentStyled = styled.div`\n  height: calc(100% - 56px);\n  display: flex;\n  flex-direction: column;\n  padding: 11px;\n  justify-content: flex-end;\n`;\n_c4 = ContentStyled;\nconst FormStyled = styled(Form)`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 2px 2px 2px 0;\n  border: 1px solid rgb(230, 230, 230);\n  border-radius: 2px;\n\n  .ant-form-item {\n    flex: 1;\n    margin-bottom: 0;\n  }\n`;\n_c5 = FormStyled;\nconst MessageListStyled = styled.div`\n  max-height: 100%;\n  overflow-y: auto;\n`;\n_c6 = MessageListStyled;\nexport default function ChatWindow() {\n  _s();\n\n  const {\n    selectedRoom,\n    members,\n    setIsInviteMemberVisible\n  } = useContext(AppContext);\n  const {\n    user: {\n      uid,\n      photoURL,\n      displayName\n    }\n  } = useContext(AuthContext);\n  const [inputValue, setInputValue] = useState('');\n  const [form] = Form.useForm();\n  const inputRef = useRef(null);\n  const messageListRef = useRef(null);\n\n  const handleInputChange = e => {\n    setInputValue(e.target.value);\n  };\n\n  const handleOnSubmit = () => {\n    addDocument('messages', {\n      text: inputValue,\n      uid,\n      photoURL,\n      roomId: selectedRoom.id,\n      displayName\n    });\n    form.resetFields(['message']); // focus to input again after submit\n\n    if (inputRef === null || inputRef === void 0 ? void 0 : inputRef.current) {\n      setTimeout(() => {\n        inputRef.current.focus();\n      });\n    }\n  };\n\n  const condition = React.useMemo(() => ({\n    fieldName: 'roomId',\n    operator: '==',\n    compareValue: selectedRoom.id\n  }), [selectedRoom.id]);\n  const messages = useFirestore('messages', condition);\n  useEffect(() => {\n    // scroll to bottom after message changed\n    if (messageListRef === null || messageListRef === void 0 ? void 0 : messageListRef.current) {\n      messageListRef.current.scrollTop = messageListRef.current.scrollHeight + 50;\n    }\n  }, [messages]);\n  return /*#__PURE__*/_jsxDEV(WrapperStyled, {\n    children: selectedRoom.id ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(HeaderStyled, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"header__info\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"header__title\",\n            children: selectedRoom.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"header__description\",\n            children: selectedRoom.description\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ButtonGroupStyled, {\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            icon: /*#__PURE__*/_jsxDEV(UserAddOutlined, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 139,\n              columnNumber: 23\n            }, this),\n            type: \"text\",\n            onClick: () => setIsInviteMemberVisible(true),\n            children: \"M\\u1EDDi\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Avatar.Group, {\n            size: \"small\",\n            maxCount: 2,\n            children: members.map(member => {\n              var _member$displayName, _member$displayName$c;\n\n              return /*#__PURE__*/_jsxDEV(Tooltip, {\n                title: member.displayName,\n                children: /*#__PURE__*/_jsxDEV(Avatar, {\n                  src: member.photoURL,\n                  children: member.photoURL ? '' : (_member$displayName = member.displayName) === null || _member$displayName === void 0 ? void 0 : (_member$displayName$c = _member$displayName.charAt(0)) === null || _member$displayName$c === void 0 ? void 0 : _member$displayName$c.toUpperCase()\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 148,\n                  columnNumber: 21\n                }, this)\n              }, member.id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 147,\n                columnNumber: 19\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(ContentStyled, {\n        children: [/*#__PURE__*/_jsxDEV(MessageListStyled, {\n          ref: messageListRef,\n          children: messages.map(mes => /*#__PURE__*/_jsxDEV(Message, {\n            text: mes.text,\n            photoURL: mes.photoURL,\n            displayName: mes.displayName,\n            createdAt: mes.createdAt\n          }, mes.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(FormStyled, {\n          form: form,\n          children: [/*#__PURE__*/_jsxDEV(Form.Item, {\n            name: \"message\",\n            children: /*#__PURE__*/_jsxDEV(Input, {\n              ref: inputRef,\n              onChange: handleInputChange,\n              onPressEnter: handleOnSubmit,\n              placeholder: \"Nh\\u1EADp tin nh\\u1EAFn...\",\n              bordered: false,\n              autoComplete: \"off\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 172,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            type: \"primary\",\n            onClick: handleOnSubmit,\n            children: \"G\\u1EEDi\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true) : /*#__PURE__*/_jsxDEV(Alert, {\n      message: \"H\\xE3y ch\\u1ECDn ph\\xF2ng\",\n      type: \"info\",\n      showIcon: true,\n      style: {\n        margin: 5\n      },\n      closable: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 127,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ChatWindow, \"V9eReOHkF9GP6i7Ab1Bc3FBdsJM=\", false, function () {\n  return [Form.useForm, useFirestore];\n});\n\n_c7 = ChatWindow;\n\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7;\n\n$RefreshReg$(_c, \"HeaderStyled\");\n$RefreshReg$(_c2, \"ButtonGroupStyled\");\n$RefreshReg$(_c3, \"WrapperStyled\");\n$RefreshReg$(_c4, \"ContentStyled\");\n$RefreshReg$(_c5, \"FormStyled\");\n$RefreshReg$(_c6, \"MessageListStyled\");\n$RefreshReg$(_c7, \"ChatWindow\");","map":{"version":3,"sources":["C:/Users/DELL/fun-chat/src/components/ChatRoom/ChatWindow.js"],"names":["UserAddOutlined","React","useContext","useEffect","useRef","useState","styled","Button","Tooltip","Avatar","Form","Input","Alert","Message","AppContext","addDocument","AuthContext","useFirestore","HeaderStyled","div","ButtonGroupStyled","WrapperStyled","ContentStyled","FormStyled","MessageListStyled","ChatWindow","selectedRoom","members","setIsInviteMemberVisible","user","uid","photoURL","displayName","inputValue","setInputValue","form","useForm","inputRef","messageListRef","handleInputChange","e","target","value","handleOnSubmit","text","roomId","id","resetFields","current","setTimeout","focus","condition","useMemo","fieldName","operator","compareValue","messages","scrollTop","scrollHeight","name","description","map","member","charAt","toUpperCase","mes","createdAt","margin"],"mappings":"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","sourcesContent":["import { UserAddOutlined } from '@ant-design/icons';\r\nimport React, { useContext, useEffect, useRef, useState } from 'react';\r\nimport styled from 'styled-components';\r\nimport { Button, Tooltip, Avatar, Form, Input, Alert } from 'antd';\r\nimport Message from './Message';\r\nimport { AppContext } from '../../Context/AppProvider';\r\nimport { addDocument } from '../../firebase/services';\r\nimport { AuthContext } from '../../Context/AuthProvider';\r\nimport useFirestore from '../../hooks/useFirestore';\r\n\r\nconst HeaderStyled = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  height: 56px;\r\n  padding: 0 16px;\r\n  align-items: center;\r\n  border-bottom: 1px solid rgb(230, 230, 230);\r\n\r\n  .header {\r\n    &__info {\r\n      display: flex;\r\n      flex-direction: column;\r\n      justify-content: center;\r\n    }\r\n\r\n    &__title {\r\n      margin: 0;\r\n      font-weight: bold;\r\n    }\r\n\r\n    &__description {\r\n      font-size: 12px;\r\n    }\r\n  }\r\n`;\r\n\r\nconst ButtonGroupStyled = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n`;\r\n\r\nconst WrapperStyled = styled.div`\r\n  height: 100vh;\r\n`;\r\n\r\nconst ContentStyled = styled.div`\r\n  height: calc(100% - 56px);\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding: 11px;\r\n  justify-content: flex-end;\r\n`;\r\n\r\nconst FormStyled = styled(Form)`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 2px 2px 2px 0;\r\n  border: 1px solid rgb(230, 230, 230);\r\n  border-radius: 2px;\r\n\r\n  .ant-form-item {\r\n    flex: 1;\r\n    margin-bottom: 0;\r\n  }\r\n`;\r\n\r\nconst MessageListStyled = styled.div`\r\n  max-height: 100%;\r\n  overflow-y: auto;\r\n`;\r\n\r\nexport default function ChatWindow() {\r\n  const { selectedRoom, members, setIsInviteMemberVisible } =\r\n    useContext(AppContext);\r\n  const {\r\n    user: { uid, photoURL, displayName },\r\n  } = useContext(AuthContext);\r\n  const [inputValue, setInputValue] = useState('');\r\n  const [form] = Form.useForm();\r\n  const inputRef = useRef(null);\r\n  const messageListRef = useRef(null);\r\n\r\n  const handleInputChange = (e) => {\r\n    setInputValue(e.target.value);\r\n  };\r\n\r\n  const handleOnSubmit = () => {\r\n    addDocument('messages', {\r\n      text: inputValue,\r\n      uid,\r\n      photoURL,\r\n      roomId: selectedRoom.id,\r\n      displayName,\r\n    });\r\n\r\n    form.resetFields(['message']);\r\n\r\n    // focus to input again after submit\r\n    if (inputRef?.current) {\r\n      setTimeout(() => {\r\n        inputRef.current.focus();\r\n      });\r\n    }\r\n  };\r\n\r\n  const condition = React.useMemo(\r\n    () => ({\r\n      fieldName: 'roomId',\r\n      operator: '==',\r\n      compareValue: selectedRoom.id,\r\n    }),\r\n    [selectedRoom.id]\r\n  );\r\n\r\n  const messages = useFirestore('messages', condition);\r\n\r\n  useEffect(() => {\r\n    // scroll to bottom after message changed\r\n    if (messageListRef?.current) {\r\n      messageListRef.current.scrollTop =\r\n        messageListRef.current.scrollHeight + 50;\r\n    }\r\n  }, [messages]);\r\n\r\n  return (\r\n    <WrapperStyled>\r\n      {selectedRoom.id ? (\r\n        <>\r\n          <HeaderStyled>\r\n            <div className='header__info'>\r\n              <p className='header__title'>{selectedRoom.name}</p>\r\n              <span className='header__description'>\r\n                {selectedRoom.description}\r\n              </span>\r\n            </div>\r\n            <ButtonGroupStyled>\r\n              <Button\r\n                icon={<UserAddOutlined />}\r\n                type='text'\r\n                onClick={() => setIsInviteMemberVisible(true)}\r\n              >\r\n                Mời\r\n              </Button>\r\n              <Avatar.Group size='small' maxCount={2}>\r\n                {members.map((member) => (\r\n                  <Tooltip title={member.displayName} key={member.id}>\r\n                    <Avatar src={member.photoURL}>\r\n                      {member.photoURL\r\n                        ? ''\r\n                        : member.displayName?.charAt(0)?.toUpperCase()}\r\n                    </Avatar>\r\n                  </Tooltip>\r\n                ))}\r\n              </Avatar.Group>\r\n            </ButtonGroupStyled>\r\n          </HeaderStyled>\r\n          <ContentStyled>\r\n            <MessageListStyled ref={messageListRef}>\r\n              {messages.map((mes) => (\r\n                <Message\r\n                  key={mes.id}\r\n                  text={mes.text}\r\n                  photoURL={mes.photoURL}\r\n                  displayName={mes.displayName}\r\n                  createdAt={mes.createdAt}\r\n                />\r\n              ))}\r\n            </MessageListStyled>\r\n            <FormStyled form={form}>\r\n              <Form.Item name='message'>\r\n                <Input\r\n                  ref={inputRef}\r\n                  onChange={handleInputChange}\r\n                  onPressEnter={handleOnSubmit}\r\n                  placeholder='Nhập tin nhắn...'\r\n                  bordered={false}\r\n                  autoComplete='off'\r\n                />\r\n              </Form.Item>\r\n              <Button type='primary' onClick={handleOnSubmit}>\r\n                Gửi\r\n              </Button>\r\n            </FormStyled>\r\n          </ContentStyled>\r\n        </>\r\n      ) : (\r\n        <Alert\r\n          message='Hãy chọn phòng'\r\n          type='info'\r\n          showIcon\r\n          style={{ margin: 5 }}\r\n          closable\r\n        />\r\n      )}\r\n    </WrapperStyled>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}